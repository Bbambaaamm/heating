# YAML 2024.10
# =====================================================================
# üß† SOUBOR: /config/heating/schedule/automation/start_end/start_end_prizemi_michal.yaml
# =====================================================================
# AUTOMATIZACE ‚Äì ud√°losti start/end pro jednotliv√© z√≥ny
# ---------------------------------------------------------------------
automation:
  # ==============================================================================================================================================================================
  # P≈ò√çZEM√ç ‚Äì MICHAL
  # ==============================================================================================================================================================================

  - id: sched_prizemi_michal_start
    alias: "Rozvrh: P≈ô√≠zem√≠ Michal ‚Äì START komfortn√≠ho okna"
    mode: restart
    triggers:
      - trigger: template
        value_template: "{{ now().strftime('%H:%M') == start_time[:5] }}" # start Po,√∫t,st,ƒçt,p√°,so,ne
    condition:
      - condition: state
        entity_id: input_boolean.schedule_enable_prizemi_michal
        state: "on" # rozvrh aktivn√≠
      - condition: template
        value_template: "{{ states('input_select.topny_rezim') != 'Off' }}" # Off = nic nedƒõlej
    actions:
      - action: script.schedule_set_zone_comfort
        data:
          climate_entity: climate.prizemi_michal # c√≠lov√° hlavice
          last_user_temp_sensor: sensor.last_user_temp_prizemi_michal

  - id: sched_prizemi_michal_end
    alias: "Rozvrh: P≈ô√≠zem√≠ Michal ‚Äì KONEC komfortn√≠ho okna ‚Üí √∫tlum"
    mode: restart
    triggers:
      - trigger: template
        value_template: "{{ now().strftime('%H:%M') == end_time[:5] }}" # end Po,√∫t,st,ƒçt,p√°,so,ne
    condition:
      - condition: state
        entity_id: input_boolean.schedule_enable_prizemi_michal
        state: "on"
      - condition: template
        value_template: "{{ states('binary_sensor.kotel_boost_active') == 'off' }}" # Boost m√° p≈ôednost
    actions:
      - action: script.schedule_set_zone_setback
        data:
          climate_entity: climate.prizemi_michal